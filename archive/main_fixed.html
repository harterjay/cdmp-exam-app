<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDMP Exam Study App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .setup-section {
            padding: 30px;
        }

        .quiz-section {
            padding: 30px;
            display: none;
        }

        .results-section {
            padding: 30px;
            display: none;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1.1em;
            color: #555;
        }

        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .chapter-item {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chapter-item:hover {
            border-color: #667eea;
            background: #f0f7ff;
        }

        .chapter-item.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .chapter-item input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .chapter-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .chapter-count {
            font-size: 0.9em;
            color: #666;
        }

        .mode-selection {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .mode-option {
            flex: 1;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .mode-option:hover {
            border-color: #667eea;
            background: #f0f7ff;
        }

        .mode-option.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .mode-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            width: 100%;
        }

        .start-btn:hover {
            transform: translateY(-2px);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .question-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            font-weight: 600;
            color: #667eea;
            font-size: 1.1em;
        }

        .question-type {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answers {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .answer-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .answer-option:hover {
            border-color: #667eea;
            background: #f0f7ff;
        }

        .answer-option.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .answer-option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .answer-option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .answer-option input {
            margin: 0;
            transform: scale(1.2);
        }

        .answer-text {
            flex: 1;
            line-height: 1.5;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            color: #721c24;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .nav-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s ease;
        }

        .nav-btn:hover {
            background: #5a6fd8;
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .results-summary {
            text-align: center;
            margin-bottom: 30px;
        }

        .score {
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 1.2em;
            color: #666;
        }

        .results-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .result-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .result-label {
            color: #666;
        }

        .restart-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }

        button {
            margin: 10px 5px;
            padding: 8px 16px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .chapter-grid {
                grid-template-columns: 1fr;
            }

            .mode-selection {
                flex-direction: column;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
            }

            .results-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CDMP Exam Study App</h1>
            <p>Master the DMBOK2 with interactive practice questions</p>
        </div>

        <div class="main-content">
            <!-- Setup Section -->
            <div class="setup-section" id="setup">
                <div class="form-group">
                    <label>Select Chapters to Study:</label>
                    <div class="chapter-grid" id="chapterGrid">
                        <!-- Chapters will be populated by JavaScript -->
                    </div>
                    <button type="button" id="selectAllBtn">Select All</button>
                    <button type="button" id="deselectAllBtn">Deselect All</button>
                </div>

                <div class="form-group">
                    <label>Study Mode:</label>
                    <div class="mode-selection">
                        <div class="mode-option" id="practiceMode">
                            <input type="radio" name="mode" value="practice" id="practice">
                            <div>
                                <h3>Practice Mode</h3>
                                <p>Get immediate feedback after each question</p>
                            </div>
                        </div>
                        <div class="mode-option" id="examMode">
                            <input type="radio" name="mode" value="exam" id="exam">
                            <div>
                                <h3>Exam Mode</h3>
                                <p>Answer all questions, then see results</p>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="start-btn" id="startBtn" disabled>Start Quiz</button>
            </div>

            <!-- Quiz Section -->
            <div class="quiz-section" id="quiz">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>

                <div class="question-card" id="questionCard">
                    <!-- Question content will be populated by JavaScript -->
                </div>

                <div class="navigation">
                    <button class="nav-btn" id="prevBtn" disabled>Previous</button>
                    <span id="questionCounter">Question 1 of 10</span>
                    <button class="nav-btn" id="nextBtn">Next</button>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="results">
                <div class="results-summary">
                    <div class="score" id="finalScore">0%</div>
                    <div class="score-label">Final Score</div>
                </div>

                <div class="results-details">
                    <div class="result-item">
                        <div class="result-value" id="correctCount">0</div>
                        <div class="result-label">Correct</div>
                    </div>
                    <div class="result-item">
                        <div class="result-value" id="incorrectCount">0</div>
                        <div class="result-label">Incorrect</div>
                    </div>
                    <div class="result-item">
                        <div class="result-value" id="totalQuestions">0</div>
                        <div class="result-label">Total Questions</div>
                    </div>
                </div>

                <button class="restart-btn" id="restartBtn">Take Another Quiz</button>
            </div>
        </div>
    </div>

    <script>
        console.log("CDMP App loading...");

        // Full examData with all 17 chapters
        const examData = {
            "Chapter 1: Data Management": [
                {
                    question: "Please select the correct definition of Data Management from the options below.",
                    type: "multiple-choice",
                    answers: [
                        "Data Management is the strict control of all plans, policies, programs and practices that enable the business strategy to be successfully executed.",
                        "Data Management is the development, execution and supervision of plans, policies, programs and practices that deliver, control, protect and enhance the value of data and information assets throughout their lifecycles.",
                        "Data Management is the development, execution and supervision of plans, policies, programs and practices that deliver, control, protect and enhance the value of data assets throughout their lifecycles.",
                        "Data Management is the development, execution and supervision of plans, policies, programs and practices that deliver, control, protect and enhance the value of information assets throughout their lifecycles."
                    ],
                    correct: [1],
                    explanation: "Please refer to page 17 of DMBOK2."
                },
                {
                    question: "Data Management Professionals only work with the technical aspects related to data.",
                    type: "multiple-choice",
                    answers: ["True", "False"],
                    correct: [1],
                    explanation: "Please refer to page 17 of DMBOK2."
                },
                {
                    question: "Differentiating between data and information. Please select the correct answers based on the sentence below: Here is a marketing report for the last month [1]. It is based on data from our data warehouse [2]. Next month these results [3] will be used to generate our month-over-month performance measure [4].",
                    type: "multiple-choice",
                    answers: [
                        "[1] Information, [2] Information, [3] Data, [4] Information",
                        "[1] Data, [2] Information, [3] Data, [4] Data",
                        "[1] Data, [2] Data, [3] Data, [4] Information",
                        "[1] Information, [2] Data, [3] Data, [4] Information"
                    ],
                    correct: [3],
                    explanation: "Please refer to page 17 of DMBOK2."
                },
                {
                    question: "Please select the answers that correctly describes the set of principles that recognizes salient features of data management and guide data management practice.",
                    type: "multi-select",
                    answers: [
                        "Data is an asset with unique properties.",
                        "It takes Metadata to manage data.",
                        "The most important part of data management is security.",
                        "Data management is lifecycle management.",
                        "Effective data management requires leadership commitment.",
                        "Efficient data management requires a team of IT professionals only."
                    ],
                    correct: [0,1,3,4],
                    explanation: "Please refer to page 22-23 of DMBOK2."
                },
                {
                    question: "Value is the difference between the cost of a thing and the benefit derived from that thing.",
                    type: "multiple-choice",
                    answers: ["True", "False"],
                    correct: [0],
                    explanation: "Please refer to page 24 of DMBOK2."
                },
                {
                    question: "Please select the correct general cost and benefit categories that can be applied consistently within an organization.",
                    type: "multi-select",
                    answers: [
                        "Cost of erasing data from servers",
                        "Cost of improving data",
                        "What the data could be sold for",
                        "Benefit of higher quality data",
                        "Cost of replacing data if it were lost",
                        "What competitors would pay for data"
                    ],
                    correct: [1,2,3,4,5],
                    explanation: "Please refer to page 24 of DMBOK2."
                },
                {
                    question: "Please select the answers that correctly describes where the costs of poor quality data comes from.",
                    type: "multi-select",
                    answers: [
                        "Scrap and rework",
                        "Organizational conflict",
                        "High job satisfaction",
                        "High productivity",
                        "Reputational costs",
                        "Compliance costs"
                    ],
                    correct: [0,1,4,5],
                    explanation: "Please refer to page 25-26 of DMBOK2."
                },
                {
                    question: "Reduced risk is a benefit of high quality data.",
                    type: "multiple-choice",
                    answers: ["True", "False"],
                    correct: [0],
                    explanation: "Please refer to page 25-26 of DMBOK2."
                },
                {
                    question: "The better an organization understands the lifecycle and lineage of its data, the better able it will be to manage its data. Please select correct implication of the focus of data management on the data lifecycle.",
                    type: "multiple-choice",
                    answers: [
                        "Data Quality must be managed throughout the data lifecycle",
                        "Data Security must only be managed at the start of the data lifecycle",
                        "Metadata Quality is the most important part of the management process",
                        "Data Management efforts should focus on the most critical data last"
                    ],
                    correct: [0],
                    explanation: "Please refer to page 29 of DMBOK2."
                },
                {
                    question: "Information gaps represent enterprise liabilities with potentially profound impacts on operational effectiveness and profitability.",
                    type: "multiple-choice",
                    answers: ["True", "False"],
                    correct: [0],
                    explanation: "Please refer to page 30 of DMBOK2."
                },
                {
                    question: "The DMBOK2 identifies how many knowledge areas for data management?",
                    type: "multiple-choice",
                    answers: ["15", "17", "19", "21"],
                    correct: [1],
                    explanation: "Please refer to page 19 of DMBOK2."
                },
                {
                    question: "Which principle states that different types of data have different lifecycle requirements?",
                    type: "multiple-choice",
                    answers: [
                        "Data is an asset with unique properties",
                        "The value of data can be and should be expressed in economic terms",
                        "Managing data means managing the quality of data",
                        "Data management is lifecycle management"
                    ],
                    correct: [3],
                    explanation: "Please refer to page 28 of DMBOK2."
                }
            ]
        };

        let currentQuiz = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let selectedMode = '';

        function populateChapters() {
            console.log("populateChapters called");
            const grid = document.getElementById('chapterGrid');
            
            if (!grid) {
                console.error("Grid element not found!");
                return;
            }
            
            grid.innerHTML = '';
            console.log("Grid cleared, creating chapters...");

            try {
                Object.keys(examData).forEach((chapter, index) => {
                    console.log(`Creating chapter: ${chapter}`);
                    const questionCount = examData[chapter].length;
                    const div = document.createElement('div');
                    div.className = 'chapter-item';
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = `chapter-${index}`;
                    
                    const titleDiv = document.createElement('div');
                    titleDiv.className = 'chapter-title';
                    titleDiv.textContent = chapter;
                    
                    const countDiv = document.createElement('div');
                    countDiv.className = 'chapter-count';
                    countDiv.textContent = `${questionCount} questions`;
                    
                    div.appendChild(checkbox);
                    div.appendChild(titleDiv);
                    div.appendChild(countDiv);
                    
                    div.addEventListener('click', (e) => {
                        if (e.target !== checkbox) {
                            checkbox.checked = !checkbox.checked;
                        }
                        div.classList.toggle('selected', checkbox.checked);
                        updateStartButton();
                    });

                    grid.appendChild(div);
                });
                
                console.log("All chapters created successfully!");
                
            } catch (error) {
                console.error("Error in populateChapters:", error);
            }
        }

        function updateStartButton() {
            const selectedChapters = document.querySelectorAll('#chapterGrid input[type="checkbox"]:checked');
            const startBtn = document.getElementById('startBtn');
            startBtn.disabled = selectedChapters.length === 0 || !selectedMode;
        }

        function selectAllChapters() {
            const checkboxes = document.querySelectorAll('#chapterGrid input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = true;
                checkbox.closest('.chapter-item').classList.add('selected');
            });
            updateStartButton();
        }

        function deselectAllChapters() {
            const checkboxes = document.querySelectorAll('#chapterGrid input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
                checkbox.closest('.chapter-item').classList.remove('selected');
            });
            updateStartButton();
        }

        function selectMode(mode) {
            selectedMode = mode;
            document.querySelectorAll('.mode-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`#${mode}`).checked = true;
            document.querySelector(`#${mode}`).closest('.mode-option').classList.add('selected');
            updateStartButton();
        }

        function setupEventListeners() {
            console.log("Setting up event listeners...");
            
            document.getElementById('selectAllBtn').addEventListener('click', selectAllChapters);
            document.getElementById('deselectAllBtn').addEventListener('click', deselectAllChapters);
            
            document.getElementById('practiceMode').addEventListener('click', () => selectMode('practice'));
            document.getElementById('examMode').addEventListener('click', () => selectMode('exam'));
            
            document.getElementById('startBtn').addEventListener('click', startQuiz);
            document.getElementById('prevBtn').addEventListener('click', previousQuestion);
            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('restartBtn').addEventListener('click', restartQuiz);
        }

        function startQuiz() {
            console.log("Starting quiz...");
            // Implementation for starting quiz would go here
            alert("Quiz functionality will be implemented!");
        }

        function previousQuestion() {
            // Implementation for previous question
        }

        function nextQuestion() {
            // Implementation for next question  
        }

        function restartQuiz() {
            // Reset everything
            currentQuiz = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedMode = '';

            // Show setup section
            document.getElementById('results').style.display = 'none';
            document.getElementById('quiz').style.display = 'none';
            document.getElementById('setup').style.display = 'block';

            // Reset form
            document.querySelectorAll('#chapterGrid input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
                cb.closest('.chapter-item').classList.remove('selected');
            });

            document.querySelectorAll('input[name="mode"]').forEach(radio => {
                radio.checked = false;
            });

            document.querySelectorAll('.mode-option').forEach(option => {
                option.classList.remove('selected');
            });

            selectedMode = '';
            updateStartButton();
        }

        function initApp() {
            console.log("initApp called");
            console.log("examData keys:", Object.keys(examData));
            populateChapters();
            setupEventListeners();
        }

        // Initialize when page loads
        window.onload = function() {
            console.log("Page loaded, initializing app...");
            initApp();
        };
    </script>
</body>
</html>